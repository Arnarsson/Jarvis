---
phase: 06-workflow-automation
plan: 03
type: execute
wave: 2
depends_on: [06-01, 06-02]
autonomous: true
---

<objective>
Build suggestion system that proposes automations for user approval (AUTO-02).
</objective>

<context>
@server/src/jarvis_server/workflow/detector.py
@server/src/jarvis_server/workflow/repository.py
@.planning/REQUIREMENTS.md (AUTO-02, AUTO-04)
</context>

<tasks>

<task type="auto">
<name>Task 1: Create suggestion generator</name>
<files>server/src/jarvis_server/workflow/suggester.py</files>
<action>
SuggestionGenerator that creates automation proposals:
- generate_suggestions() -> list[Suggestion]
- Analyzes patterns in "observe" tier with frequency >= threshold
- Creates human-readable descriptions
- Estimates time saved

Suggestion model:
- pattern_id, title, description
- trigger_description (when this happens...)
- action_description (do this...)
- estimated_time_saved_minutes
- confidence_score
- similar_examples: list[CapturePreview]
</action>
<done>Generator created</done>
</task>

<task type="auto">
<name>Task 2: Create suggestion API</name>
<files>server/src/jarvis_server/api/workflow.py</files>
<action>
Endpoints:
- GET /api/workflow/suggestions - List pending suggestions
- POST /api/workflow/suggestions/{id}/approve - Promote to "suggest" tier
- POST /api/workflow/suggestions/{id}/reject - Mark as rejected
- GET /api/workflow/patterns - List all patterns with stats
- PATCH /api/workflow/patterns/{id} - Update pattern settings
</action>
<done>API created</done>
</task>

<task type="auto">
<name>Task 3: Create Claude integration for suggestions</name>
<files>server/src/jarvis_server/workflow/ai_suggester.py</files>
<action>
Use Claude to enhance suggestions:
- Describe pattern in natural language
- Generate automation name
- Explain what the automation would do
- Assess risk level (safe/caution/dangerous)
</action>
<done>AI integration added</done>
</task>

<task type="auto">
<name>Task 4: Add notification for suggestions</name>
<files>server/src/jarvis_server/workflow/notifier.py</files>
<action>
When new suggestion is ready:
- Store in suggestions queue
- Optional: webhook/push notification
- Display in web UI dashboard
</action>
<done>Notifications added</done>
</task>

</tasks>

<verification>
- Suggestions generated for frequent patterns
- API returns suggestions with examples
- Approve/reject changes pattern tier
</verification>

<success_criteria>
- User can see pending automation suggestions
- User can approve/reject with one click
- Approved patterns move to "suggest" tier
</success_criteria>

<commit_guidance>
feat(06-03): add automation suggestion system
</commit_guidance>
